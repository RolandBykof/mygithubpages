javascript:void(function(){
  /* 1. MUUTTUJAT JA SIIVOUS */
  if(window.__a11yAssistantCleanup){ window.__a11yAssistantCleanup(); }
  var storedName = "";
  var assistantActive = false;

  /* 2. TYYLIT */
  var style = document.createElement('style');
  style.id = 'a11y-assistant-style';
  style.textContent = '#a11y-box { position: fixed; z-index: 1000000; top: 20%; left: 50%; transform: translateX(-50%); background: #fff; border: 5px solid #0056b3; padding: 20px; border-radius: 15px; box-shadow: 0 0 40px rgba(0,0,0,0.5); width: 400px; font-family: Arial; } #a11y-box input { width: 100%; padding: 12px; font-size: 18px; margin-top: 10px; border: 2px solid #333; } #a11y-status-tag { position: fixed; top: 0; left: 50%; transform: translateX(-50%); background: #ffc107; color: #000; padding: 5px 15px; z-index: 1000001; font-weight: bold; border-radius: 0 0 10px 10px; font-size: 12px; display: none; }';
  document.head.appendChild(style);

  /* 3. APUIKKUNAN LUONTI */
  var box = document.createElement('div'); box.id = 'a11y-box';
  box.innerHTML = '<strong style="font-size: 18px;">A11y-syöttöavustaja</strong><p>Kirjoita asiantuntijan nimi ja paina Enter.</p>';
  var inp = document.createElement('input'); inp.type = 'text'; inp.placeholder = 'Esim. Matti Meikäläinen';
  box.appendChild(inp);
  document.body.appendChild(box);

  var statusTag = document.createElement('div'); statusTag.id = 'a11y-status-tag';
  statusTag.textContent = 'AVUSTAJA AKTIIVINEN: Odotetaan valikon avaamista...';
  document.body.appendChild(statusTag);

  var live = document.createElement('div');
  live.setAttribute('role', 'status'); live.setAttribute('aria-live', 'assertive');
  live.style.position = 'absolute'; live.style.left = '-9999px';
  document.body.appendChild(live);

  inp.focus();

  /* 4. LOGIIKKA: TALLENNUS */
  inp.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      storedName = inp.value;
      if (storedName.trim() === "") return;
      
      box.style.display = 'none';
      statusTag.style.display = 'block';
      assistantActive = true;
      live.textContent = 'Nimi tallennettu: ' + storedName + '. Avaa nyt asiantuntijavalikko, niin täytän sen.';
    }
    if (e.key === 'Escape') { cleanup(); }
  });

  /* 5. LOGIIKKA: VALIKON KYTTÄÄMINEN */
  var observer = new MutationObserver(function() {
    if (!assistantActive) return;

    // Etsitään avointa ui-select-valikkoa
    var openMenu = document.querySelector('.ui-select-container.open');
    if (openMenu) {
      var realInput = openMenu.querySelector('input.ui-select-search');
      if (realInput) {
        // "Tykitetään" teksti
        realInput.value = storedName;
        
        // Laukaistaan tapahtumat, jotta AngularJS huomaa muutoksen
        realInput.dispatchEvent(new Event('input', { bubbles: true }));
        realInput.dispatchEvent(new Event('change', { bubbles: true }));
        
        // Kerrotaan käyttäjälle
        live.textContent = 'Avustaja kirjoitti nimen: ' + storedName;
        
        // Nollataan avustaja, jotta se ei jää jumiin
        assistantActive = false;
        statusTag.style.display = 'none';
        
        // Valinnainen: jos haluat, että avustaja sulkeutuu kokonaan tässä kohtaa
        // cleanup(); 
      }
    }
  });

  observer.observe(document.body, { childList: true, subtree: true, attributes: true, attributeFilter: ['class'] });

  function cleanup() {
    observer.disconnect();
    if(box) box.remove();
    if(statusTag) statusTag.remove();
    if(style) style.remove();
    window.__a11yAssistantCleanup = null;
  }
  window.__a11yAssistantCleanup = cleanup;
})();